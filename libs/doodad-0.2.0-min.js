/*
Doodad v0.2.0
Public Domain, https://github.com/droptype/doodad
2013-9-17

Contains a copy of spin.js, http://fgnass.github.io/spin.js
Copyright (c) 2011-2013 Felix Gnass
Licensed under the MIT license
*/

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){var a,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=Backbone.View,a=function(a){function b(){return this.toggleEnabled=e(this.toggleEnabled,this),this.isEnabled=e(this.isEnabled,this),this.enable=e(this.enable,this),this.disable=e(this.disable,this),this.show=e(this.show,this),this.hide=e(this.hide,this),this.getSize=e(this.getSize,this),this.getScreenPosition=e(this.getScreenPosition,this),this.getPosition=e(this.getPosition,this),d=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.__doc__="Public: The base view for all Doodad components. Provides methods for\n        getting the size & position, hiding & showing, and enabling &\n        disabling. The enable and disable only set an attribute and don't\n        actually handle any disabling.\n",b.prototype.initialize=function(a){return this._is_enabled=!0,a.css?this._setCSS(a.css):void 0},b.prototype.getPosition=function(){var a,b,c,d,e,f,g;return g=this.$el.offset(),c=g.top,b=g.left,d=this.$el.width(),a=this.$el.height(),e=b+d/2,f=c+a/2,{x:e,y:f}},b.prototype.getScreenPosition=function(){var a;return a=this.getPosition(),a.y-=$(window).scrollTop(),a},b.prototype.getSize=function(){return{width:this.$el.width(),height:this.$el.height()}},b.prototype.hide=function(){return this.$el.hide(),this},b.prototype.show=function(){return this.$el.show(),this},b.prototype.disable=function(){return this._is_enabled=!1,this.$el.attr("disabled",!0)},b.prototype.enable=function(){return this._is_enabled=!0,this.$el.removeAttr("disabled")},b.prototype.isEnabled=function(){return this._is_enabled},b.prototype.toggleEnabled=function(){return this._is_enabled?this.disable():this.enable(),this._is_enabled},b.prototype._trapClick=function(a){a.stopPropagation()},b.prototype._setClasses=function(){var a,b,c,d,e,f,g,h,i=this;for(b=[],e=this._options.type.split("+"),c=0,d=e.length;d>c;c++)a=e[c],b.push.apply(b,a.split("-"));return(null!=(f=this._options["class"])?f.length:void 0)>0&&b.push.apply(b,this._options["class"].split(" ")),b=_.map(b,function(a){return""+i.className+"-"+a}),(null!=(g=this._options)?g.extra_classes:void 0)&&(_.isArray(null!=(h=this._options)?h.extra_classes:void 0)?b.push.apply(b,this._options.extra_classes):b.push(this._options.extra_classes)),this.$el.addClass(b.join(" "))},b.prototype._setCSS=function(a){return this.$el.css(a)},b}(c),b.exports=a}).call(this)},{}],2:[function(a,b){(function(){var c,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../BaseDoodad"),e=a("../subcomponents/Spinner"),d=function(a){function b(){return this.setLabel=g(this.setLabel,this),this._handleClick=g(this._handleClick,this),f=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.__doc__="<Link to button docs>",b.prototype.tagName="BUTTON",b.prototype.className="Button",b.prototype.initialize=function(a){return b.__super__.initialize.apply(this,arguments),this._options=_.extend({},{type:"text",label:null,"class":null,helptext:null,enabled:!0,spinner:!1,progress:null,extra_classes:[]},a),this._validateOptions(),this._options.enabled||this.disable(),this._options.spinner&&(this._spinner=new e({variant:-1===this._options.type.indexOf("bare")?"light":"dark"})),this.render()},b.prototype._validateOptions=function(){var a;if("text"===(a=!this._options.type)||"icon"===a||"icon+text"===a||"text-bare"===a||"icon-bare"===a||"icon+text-bare"===a)throw new Error("Button type must be one of 'text', 'icon', 'icon+text', got "+this._options.type+".");if("text"===this._options.type&&!this._options.label)throw new Error("Buttons of type='text' MUST have a label set.");if(null==this._options.action&&null==this._options.url)throw new Error("A Button action function or url must be specified.")},b.prototype._setClasses=function(){return b.__super__._setClasses.call(this),this._options.spinner?this.$el.addClass("Button-spinner"):void 0},b.prototype.render=function(){return this.$el.empty(),this._setClasses(),this._options.label&&(this.$el.append('<span class="Button_label"></span>'),this.setLabel(this._options.label)),-1!==this._options.type.indexOf("icon")&&this.$el.prepend('<div class="Button_icon_display"></div>'),this._options.spinner&&this.$el.append(this._spinner.render()),this.delegateEvents(),this.el},b.prototype.disable=function(){return b.__super__.disable.call(this),this._setInactive()},b.prototype.enable=function(){return b.__super__.enable.call(this),this._setInactive()},b.prototype._setActive=function(){var a;return null!=(a=this._spinner)&&a.start(),this.$el.addClass("active")},b.prototype._setInactive=function(){var a;return null!=(a=this._spinner)&&a.stop(),this.$el.removeClass("active")},b.prototype.events={click:"_handleClick"},b.prototype._handleClick=function(a){null!=a&&a.stopPropagation(),this._options.spinner&&(this.disable(),this._setActive()),this._options.action(this)},b.prototype.setLabel=function(a){var b;return"icon"===(b=this._options.type)||"icon-bare"===b?this.$el.attr("title",a):this.$el.find(".Button_label").text(a),this},b}(c),b.exports=d}).call(this)},{"../BaseDoodad":1,"../subcomponents/Spinner":10}],3:[function(a,b){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../BaseDoodad"),d=function(a){function b(){return this._setChoice=f(this._setChoice,this),e=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.__doc__="",b.prototype.tagName="DIV",b.prototype.className="Select",b.prototype.initialize=function(a){return b.__super__.initialize.apply(this,arguments),this._options=_.extend({},{type:"drop",width:null,height:null,label:"",placeholder:"- - -",variant:null,enabled:!0,required:!1,extra_classes:[]},a),this.render()},b.prototype._setClasses=function(){var a,b,c=this;return a=this._options.type.split("+"),(null!=(b=this._options["class"])?b.length:void 0)>0&&a.push.apply(a,this._options["class"].split(" ")),a=_.map(a,function(a){return""+c.className+"-"+a}),a.push.apply(a,this._options.extra_classes),this.$el.addClass(a.join(" "))},b.prototype.render=function(){switch(this.$el.empty(),this._setClasses(),this.ui={},this._options.type){case"drop":this._renderDrop();break;case"grid":this._renderGrid()}return this.delegateEvents(),this.el},b.prototype.events={"click .Select_value":"_showChoices","click .Select_label":"_showChoices"},b.prototype._showChoices=function(){var a=this;return this.ui.choices.css({opacity:0,left:this.ui.value.position().left}),this.ui.choices.removeAttr("data-hidden"),_.defer(function(){var b,c,d;return d=a._selected_choice_el.position(),c=d.top,b=d.left,a.ui.choices.css({top:-1*c,opacity:""}),console.log(c,b),a.ui.value.attr("data-hidden",!0)})},b.prototype._setChoice=function(a,b){return null==b&&(b={}),console.log("setting choice",a.value),this.ui.choices.find("[data-selected]").removeAttr("data-selected"),this.value=_.isFunction(a.value)?a.value(this):a.value,this._selected_choice_el=a.$el,this._selected_choice_el.attr("data-selected",!0),this.ui.value.text(a.label),this.ui.choices.attr("data-hidden",!0),this.ui.value.removeAttr("data-hidden"),b.silent?void 0:this._options.action(this,this.value,a.label)},b.prototype._renderGrid=function(){return this.$el.html('<div class="Select_label">Category:</div>\n<div class="Select_choices">\n    <div class="Select_choice">\n        <span class="Select_choice_label">Option 1\n    </div>\n    <div class="Select_choice" data-selected="true">Option 2</div>\n    <div class="Select_choice">Option 3</div>\n    <div class="Select_choice">Option 4</div>\n    <div class="Select_choice">Option 5</div>\n</div>')},b.prototype._renderDrop=function(){var a,b,c=this;return this.ui.label=$("<div class='Select_label'>"+this._options.label+"</div>"),this.ui.value=$("<div class='Select_value'><div>"),this.ui.choices=$("<div class='Select_choices'></div>"),a=!1,b=function(a){return a.$el=$("<div class='Select_choice"+(a.null_choice?"-null":"")+"'>\n    <span class='Select_choice_label'>\n        "+a.label+"\n    </span>\n</div>"),a.$el.attr("data-value",a.value),a.$el.on("click",function(){return c._setChoice(a)})},_.each(this._options.choices,function(d){return console.log(d),b(d),d["default"]&&(a=!0,c._setChoice(d,{silent:!0})),c.ui.choices.append(d.$el)}),a&&this._options.required||!function(){var d;return d={null_choice:!0,label:c._options.placeholder,value:null},b(d),c.ui.choices.prepend(d.$el),a?void 0:c._setChoice(d,{silent:!0})}(),this.$el.append(this.ui.label),this.$el.append(this.ui.value),this.$el.append(this.ui.choices)},b}(c),b.exports=d}).call(this)},{"../BaseDoodad":1}],4:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c=a("../BaseDoodad"),f=function(a){var b;return"~"===a[0]?(a=parseInt(a.slice(1)),b=!0):(a=parseInt(a),b=!1),[b,a]},e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.__doc__="",b.prototype.tagName="DIV",b.prototype.className="StringInput",b.prototype.initialize=function(a){var c,d,e,g,h;this._is_enabled=!0,this._options=_.extend({},{tokenize:null,variant:null,helptext:null,enabled:!0,multiline:!1,unique:!1,placeholder:"",label:"",extra_classes:[],char_limit:null,word_limit:null,value:"",on:{}},a),b.__super__.initialize.call(this,this._options),this.raw_value="",this._options.tokenize?(this.value=this._options.value?this._options.value:[],this.raw_value=this.value.join(this._options.tokenize),this._current_token=""):this.value=this._options.value,this._options.char_limit?(e=f(this._options.char_limit),this._options.limit_is_soft=e[0],this._options.char_limit=e[1]):this._options.word_limit&&(g=f(this._options.word_limit),this._options.limit_is_soft=g[0],this._options.word_limit=g[1]),h=this._options.on;for(c in h)d=h[c],this.on(c,d);return this.render()},b.prototype._setClasses=function(){var a;return a=[],null!=this._options.tokenize&&a.push("StringInput-tokenize"),this._options.multiline&&a.push("StringInput-multiline"),a.push.apply(a,this._options.extra_classes),this.$el.addClass(a.join(" "))},b.prototype.render=function(){return this._setClasses(),this._ui={},this._options.tokenize?(this.$el.html('<label class="StringInput_label">\n    '+this._options.label+'\n</label>\n<div class="StringInput_token_form">\n    <div class="StringInput_tokens"></div>\n    <input class="StringInput_input" placeholder="'+this._options.placeholder+'">\n</div>'),this._ui.tokens=this.$el.find(".StringInput_tokens")):this._options.multiline?this.$el.html('<label>\n    <span class="StringInput_label">'+this._options.label+'</span>\n    <textarea class="StringInput_input" placeholder="'+this._options.placeholder+'"></textarea>\n</label>'):this.$el.html('<label>\n    <span class="StringInput_label">'+this._options.label+'</span>\n    <input class="StringInput_input" placeholder="'+this._options.placeholder+'">\n</label>'),this._ui.input=this.$el.find(".StringInput_input"),this._options.tokenize?this._renderTokens():((this._options.char_limit||this._options.word_limit)&&(this._ui.limit_counter=$('<span class="StringInput_counter"></span>'),this.$el.find("label").append(this._ui.limit_counter),this._updateCharCount()),this._ui.input.val(this.value)),this.delegateEvents(),this._options.enabled||this.disable(),this.el},b.prototype.disable=function(){return this._ui.input.attr("disabled",!0),b.__super__.disable.call(this)},b.prototype.enable=function(){return this._ui.input.removeAttr("disabled"),b.__super__.enable.call(this)},b.prototype._calcLimit=function(){var a,b,c;return this._options.char_limit?(b=this._options.char_limit,a=this.value.length):(b=this._options.word_limit,a=(null!=(c=this.value.match(/[\d\w_-]+/g))?c.length:void 0)||0),this.over_limit=a>b,[this.over_limit,a,b]},b.prototype._updateCharCount=function(){var a,b,c,d;return d=this._calcLimit(),c=d[0],a=d[1],b=d[2],this._ui.limit_counter.text(""+a+"/"+b),this._ui.limit_counter.removeClass("StringInput_counter-warn StringInput_counter-over"),c?this._ui.limit_counter.addClass("StringInput_counter-over"):a>.8*b&&this._ui.limit_counter.addClass("StringInput_counter-warn"),[c,a,b]},b.prototype._renderTokens=function(){var a=this;return this._ui.tokens.empty(),_.each(this.value,function(b){var c;return c=$('<span class=\'StringInput_token\'>\n    <span class="StringInput_token_value"></span>\n    <button class="StringInput_token_remove">x</button>\n</span>'),c.find(".StringInput_token_value").text(b),c.find(".StringInput_token_remove").on("click",function(c){return c.stopPropagation(),a._removeToken(b)}),a._ui.tokens.append(c)})},b.prototype._updatePlaceholder=function(){return console.log("_updatePlaceholder",this.value.length),this.value.length>0?this._ui.input.attr("placeholder",""):this._ui.input.attr("placeholder",this._options.placeholder)},b.prototype.events={"keydown    .StringInput_input":"_handleInput","paste      .StringInput_input":"_handleInput","click      .StringInput_token_form":"_focusInput","blur       .StringInput_input":"_fireBlur","focus      .StringInput_input":"_fireFocus"},b.prototype._focusInput=function(){return this._is_enabled?this._ui.input.focus():void 0},b.prototype._fireBlur=function(){return this.trigger("blur",this)},b.prototype._fireFocus=function(){return this.trigger("focus",this)},b.prototype._removeToken=function(a){return this.value=_.without(this.value,a),this._renderTokens(),this.raw_value=this.value.join(this._options.tokenize),this.trigger("change",this,this.value,this.raw_value)},b.prototype._processPaste=function(){var a=this;_.defer(function(){var b,c;return b=a._ui.input.val(),null!=a._options.tokenize?(a._ui.input.val(""),b=b.split(a._options.tokenize),b=_.map(b,function(a){return a.trim()}),(c=a.value).push.apply(c,b),a._renderTokens()):a.raw_value=a.value=b,a.trigger("change",a,a.value,a.raw_value)})},b.prototype._handleInput=function(a){var b,c,e,f=this;c=(e=a.which)===d.ENTER||e===d.TAB,this._options.tokenize?(c&&a.preventDefault(),_.defer(function(){var b,e,g,h;return e=f._ui.input.val(),e.length>0?(h=!1,b="",e[e.length-1]===f._options.tokenize&&(e=e.split(""),b=e.pop(),e=e.join(""),h=!0),(h||c)&&(e=e.trim(),f._ui.input.val(""),!e||f._options.unique&&j.call(f.value,e)>=0||(f.raw_value+=b,f.value.push(e),f._renderTokens(),f.trigger("change",f,f.value,f.raw_value)))):a.which===d.DELETE&&(g=f.value.pop(),f._renderTokens(),f._ui.input.val(g),f.raw_value=f.value.join(f._options.tokenize),f.trigger("change",f,f.value,f.raw_value)),f._updatePlaceholder()})):(b=this.value,_.defer(function(){var a,c,d,e;return f.raw_value=f.value=f._ui.input.val(),(f._options.char_limit||f._options.word_limit)&&(e=f._calcLimit(),d=e[0],a=e[1],c=e[2],d&&!f._options.limit_is_soft&&(f.raw_value=f.value=b,f._ui.input.val(b)),f._updateCharCount()),f.trigger("change",f,f.value,f.raw_value)})),88===a.which&&a.metaKey&&_.defer(function(){return f._handleInput(a)})},b}(c),d={DELETE:8,TAB:9,ENTER:13},b.exports=e}).call(this)},{"../BaseDoodad":1}],5:[function(a,b){(function(){var a,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=Backbone.View,a=function(a){function b(){return this.addToTail=e(this.addToTail,this),this.addToHead=e(this.addToHead,this),this.render=e(this.render,this),this.attachTo=e(this.attachTo,this),d=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.__doc__="",b._name="AppBar",b.prototype.initialize=function(a){return console.log("AppBar.initialize"),this._options=_.extend({},{head:[],tail:[],responsive:!0,pinned:!0,position:"top",attach_to:"body",inject_padding:!0},a),this._validateOptions(),this._setClasses(),this._options.attach_to?this.attachTo($(this._options.attach_to)):void 0},b.prototype._validateOptions=function(){var a;if("top"===(a=!this._options.position)||"bottom"===a||"left"===a||"right"===a)throw new Error("AppBar position must be one of 'top', 'bottom', 'left', 'right'. Got: "+this._options.position)},b.prototype._setClasses=function(){return this.$el.addClass(this.constructor._name),this.$el.addClass("AppBar-"+this._options.position),this._options.responsive?this.$el.addClass("AppBar-responsive"):void 0},b.prototype.attachTo=function(a){var b=this;return this.$el.detach(),a.append(this.render()),_.defer(function(){var c,d,e,f;if(("left"===(f=b._options.position)||"right"===f)&&(d=b.$el.find(".AppBar_head").width(),e=b.$el.find(".AppBar_tail").width(),e>d&&(d=e),b.$el.css({width:d})),b._options.inject_padding){switch(c={"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0},b._options.position){case"top":c["padding-top"]=b.$el.height();break;case"bottom":c["padding-bottom"]=b.$el.height();break;case"left":c["padding-left"]=b.$el.width();break;case"right":c["padding-right"]=b.$el.width()}return a.css(c)}})},b.prototype.render=function(){var a,b;return this.$el.html("<div class='AppBar_head'></div>\n<div class='AppBar_tail'></div>"),a=this.$el.find(".AppBar_head"),_.each(this._options.head,function(b){return a.append(b.render())}),b=this.$el.find(".AppBar_tail"),_.each(this._options.tail,function(a){return b.append(a.render())}),this.el},b.prototype.addToHead=function(a){return this._options.head.push(a),this.render()},b.prototype.addToTail=function(a){return this._options.tail.push(a),this.render()},b}(c),b.exports=a}).call(this)},{}],6:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice,l=function(a,b){return function(){return a.apply(b,arguments)}};d=a("../BaseDoodad"),c=$(window),f=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.className="Panel",b.prototype.initialize=function(a){return this._layout=a,b.__super__.initialize.apply(this,arguments)},b.prototype.render=function(){return console.log("Panel.render"),this.el},b.prototype.setLayout=function(a){return this._layout=a,this.$el.css({width:this._layout.width,height:this._layout.height,position:"absolute",left:this._layout.left,top:this._layout.top,background:this._layout.background,overflow:"scroll","transition-property":"all","transition-duration":"0.1s"})},b.prototype.setContent=function(){var a,b=this;return a=1<=arguments.length?k.call(arguments,0):[],console.log("setting content",a),this.$el.empty(),_.each(a,function(a){return b.$el.append(a.render())})},b}(d),e=function(a){function b(){return this.setPanelSize=l(this.setPanelSize,this),this.setPanelContent=l(this.setPanelContent,this),this.getPanel=l(this.getPanel,this),this.resize=l(this.resize,this),h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.className="Layout",b.prototype.initialize=function(a){var b=this;return this._row_first=null!=a.row_first?a.row_first:!0,this._layout=a.layout,this._panels=[],this.$el.css({position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(240,240,240,0.5)"}),this._layout.forEach(function(a){var c;return c=[],b._panels.push(c),a[1].forEach(function(){return c.push(new f)})}),$(window).on("resize",_.debounce(this.resize,50))},b.prototype.render=function(){var a=this;return console.log("Layout.render"),this.$el.empty(),this._panels.forEach(function(b){return b.forEach(function(b){return a.$el.append(b.render())})}),this.resize(),this.el},b.prototype.resize=function(){var a,b,c,d,e,f,g,h,i=this;return g=this.$el.parent().width(),f=this.$el.parent().height(),this._row_first||(h=[g,f],f=h[0],g=h[1]),c=0,a=0,_.each(this._layout,function(b){return"flex"===b[0]?c+=1:a+=b[0]}),b=0,e=(f-a)/c,d=0,_.each(this._layout,function(a,c){var f,h,j,k,l,m,n;return m=a[0],h=a[1],k="flex"===m?e:m,l=0,j=0,_.each(h,function(a){return"flex"===a?l+=1:j+=a}),f=(g-j)/l,n=0,_.each(h,function(a,e){var g,h;return h="flex"===a?f:a,d+=1,g=i._row_first?{left:n,width:h,top:b,height:k}:{top:n,height:h,left:b,width:k},g.background="rgba(255,0,0,0."+d+")",i._panels[c][e].setLayout(g),n+=h}),b+=k})},b.prototype.getPanel=function(a,b){return this._panels[a][b]},b.prototype.setPanelContent=function(){var a,b,c,d;return b=arguments[0],c=arguments[1],a=3<=arguments.length?k.call(arguments,2):[],(d=this._panels[b][c]).setContent.apply(d,a)},b.prototype.setPanelSize=function(a,b,c){return this._layout[a][1][b]=c,this.resize()},b}(Backbone.View),e.Panel=f,b.exports=e}).call(this)},{"../BaseDoodad":1}],7:[function(a,b){(function(){var c,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice;c=a("../BaseDoodad"),d=a("../components/Button"),f={},e=function(a){function b(){return this.toggle=h(this.toggle,this),this.hide=h(this.hide,this),this.show=h(this.show,this),this._setFlagPosition=h(this._setFlagPosition,this),this.render=h(this.render,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.className="Popover",b.prototype.initialize=function(a){var c,d,e;b.__super__.initialize.apply(this,arguments),this._options=_.extend({},{type:"flag",content:[],width:500,offset:[0,0],close_on_outside:!1,title:null,dismiss:null,confirm:null,solo:!0,on:{}},a),-1!==this._options.type.indexOf("flag")&&null==this._options.origin&&(this._options.origin="top-left"),e=this._options.on;for(c in e)d=e[c],this.on(c,d);return this._setClasses(),this._is_showing=!1},b.prototype._setClasses=function(){return b.__super__._setClasses.call(this),-1!==this._options.type.indexOf("flag")?this.$el.addClass(""+this.className+"-"+this._options.origin):void 0},b.prototype.render=function(){var a=this;return this.$el.empty(),this.ui={},this.ui.content=$('<div class="Popover_content"></div>'),this.ui.content.css({width:this._options.width}),this._options.title&&this.ui.content.append('<div class="Popover_title">'+this._options.title+"</div>"),_.each(this._options.content,function(b){return a.ui.content.append(b.render())}),(this._options.dismiss||this._options.confirm)&&(this.ui.controls=$('<div class="Popover_controls"></div>'),this._options.dismiss&&(null==this._options.dismiss.render&&(this._options.dismiss=new d({label:this._options.dismiss,action:function(){return a.trigger("dismiss"),a.hide()},extra_classes:"Popover_dismiss"})),this.ui.controls.append(this._options.dismiss.render())),this._options.confirm&&(null==this._options.confirm.render&&(this._options.confirm=new d({label:this._options.confirm,action:function(){return a.trigger("confirm"),a.hide()},"class":"friendly",extra_classes:"Popover_confirm"})),this.ui.controls.append(this._options.confirm.render())),this.ui.content.append(this.ui.controls)),this.$el.append(this.ui.content),this.el},b.prototype.setPosition=function(){var a;return a=1<=arguments.length?k.call(arguments,0):[],"modal"===this._options.type?this._setModalPosition.apply(this,a):this._setFlagPosition.apply(this,a)},b.prototype._setModalPosition=function(){var a,b,c,d,e,f,g,h;return h=this.ui.content.width(),d=this.ui.content.height(),a=$(window),g=(a.width()-h)/2,c=(a.height()-d)/2,e=parseInt(this.ui.content.css("padding")),g-=e,c-=e,50>g&&(g=50),b="",50>c?b=f=50:c>100&&(f=100),this.ui.content.css({left:g,right:g,top:f,bottom:b})},b.prototype._setFlagPosition=function(a){var b,c,d,e,f,g,h,i,j=this;return g=a.x,h=a.y,c=0,d=0,f=function(a){switch(a){case"left":return c=0;case"right":return c=j.ui.content.width();case"top":return d=0;case"bottom":return d=j.ui.content.height()}},i=this._options.origin.split("-"),b=i[0],e=i[1],f(b),f(e),"center"===b&&(d=this.ui.content.height()/2),"center"===e&&("top"===b||"bottom"===b?c=this.ui.content.width()/2:d=this.ui.content.height()/2),console.log(b,e,c,d,this._options.offset),this.$el.css({left:g+this._options.offset[0],top:h+this._options.offset[1]}),this.ui.content.css({left:0-c,top:0-d})},b.prototype.show=function(a){var b=this;return null==a&&(a=null),this._is_showing=!0,f[this.cid]=this,console.log(f),$("body").append(this.render()),this._options.close_on_outside&&_.defer(function(){return $(window).one("click",b.hide)}),this._options.solo&&(console.log("closing others!",this.cid),_.each(f,function(a){return null!=a&&a.cid!==b.cid?a.hide():void 0})),this.ui.content.css("opacity",0),_.defer(function(){return-1===b._options.type.indexOf("fixed")?b.setPosition(null!=a?a.getPosition():void 0):b.setPosition(null!=a?a.getScreenPosition():void 0),b.ui.content.css("opacity",1)})},b.prototype.hide=function(){return this._is_showing=!1,f[this.cid]=null,this.$el.detach()},b.prototype.toggle=function(a){return this._is_showing?this.hide():this.show(a),this._is_showing},b.prototype.events={"click *":"_trapClick",click:"hide"},b}(c),b.exports=e}).call(this)},{"../BaseDoodad":1,"../components/Button":2}],8:[function(a){(function(){var b,c,d,e,f,g,h,i,j,k;c=a("./BaseDoodad"),i=a("./subcomponents/Spinner"),k=a("./subcomponents/Tags"),d=a("./components/Button"),h=a("./components/Select"),j=a("./components/StringInput"),b=a("./containers/AppBar"),f=a("./containers/Layout"),g=a("./containers/Popover"),e={AppBar:b,BaseDoodad:c,Button:d,Layout:f,Popover:g,Select:h,Spinner:i,StringInput:j,Tags:k,VERSION:"0.2.0"},window.Doodad=e}).call(this)},{"./BaseDoodad":1,"./components/Button":2,"./components/Select":3,"./components/StringInput":4,"./containers/AppBar":5,"./containers/Layout":6,"./containers/Popover":7,"./subcomponents/Spinner":10,"./subcomponents/Tags":11}],9:[function(a,b){(function(){b.exports={vendorPrefixCSS:function(a,b){var c,d,e,f,g;for(d={},g=["","-webkit-","-moz-","-ms-","-o-"],e=0,f=g.length;f>e;e++)c=g[e],d[""+c+a]=b;return d}}}).call(this)},{}],10:[function(a,b){(function(){var c,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../BaseDoodad"),d=a("spin"),f=a("../misc/helpers").vendorPrefixCSS,e=function(a){function b(){return this.stop=h(this.stop,this),this.start=h(this.start,this),this.isActive=h(this.isActive,this),this._setUpSpinner=h(this._setUpSpinner,this),this.render=h(this.render,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.tagName="SPAN",b.prototype.className="Spinner",b.prototype.initialize=function(a){var c=this;return this._options=_.extend({},{type:"arrows",variant:"dark",active:!1,extra_classes:[],size:null,auto_hide:!0},a),b.__super__.initialize.call(this,this._options),this._rate=1,this.render(),this._options.auto_hide&&this._options.active&&this.hide(),_.defer(function(){return c._options.active?c.start():c.stop()})},b.prototype.render=function(){return this._setClasses(),this.el},b.prototype._setUpSpinner=function(a){var b,c,e,f;return null!=(f=this._spinner)&&f.stop(),b="dark"===this._options.variant?"#000":"#fff",e=parseInt(this.$el.css("width").replace("px","")),c=parseInt(this.$el.css("height").replace("px","")),a=_.extend({radius:e/4,length:e/4-1,width:3,color:b,className:""},a),this._spinner=new d(a),this._spinner.spin(this.el),this.$el.children().css({left:"50%",top:"50%"})},b.prototype.isActive=function(){return this._active},b.prototype.start=function(){return this.$el.addClass(""+this.className+"-active"),this._active=!0,this._setUpSpinner({speed:this._rate}),this._options.auto_hide&&this.show(),this},b.prototype.stop=function(){return clearInterval(this._rotation_interval),this.$el.removeClass(""+this.className+"-active"),this._active=!1,this._setUpSpinner({speed:0}),this._options.auto_hide&&this.hide(),this},b}(c),b.exports=e}).call(this)},{"../BaseDoodad":1,"../misc/helpers":9,spin:12}],11:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=[].slice,P=function(a,b){return function(){return a.apply(b,arguments)}},Q={}.hasOwnProperty,R=function(a,b){function c(){this.constructor=a}for(var d in b)Q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../BaseDoodad"),u=function(){function a(a){var b;b=a.content,this._node=document.createTextNode(b)}return a.__doc__="",a.prototype.render=function(){return this._node},a.prototype.setContent=function(){var a;return a=1<=arguments.length?O.call(arguments,0):[],this._node.textContent=a.join(""),this},a.prototype.addContent=function(){var a;return a=1<=arguments.length?O.call(arguments,0):[],this.setContent.apply(this,[this._node.textContent].concat(O.call(a))),this},a}(),t=function(a){function b(){return this.render=P(this.render,this),this.setContent=P(this.setContent,this),this.addContent=P(this.addContent,this),w=b.__super__.constructor.apply(this,arguments)}return R(b,a),b.__doc__="Public: A base class for Tag components. All Tag-base classes MUST specify\n        a `@_takes_content` class property, either `true` or `false`. Also\n        they MUST set a `tagName` (otherwise they'll just be a div). The\n        classes also MAY specify a `@_default_child` class property which\n        is a Tag-based class to use for bare strings passed to content.\n\noptions - An object with configuration options for the tag.\n    * content   - (optional) A String, Tag, TextNode, or Array of any\n                    combination of the three. (optional since it MAY be\n                    added later using `.addContent()` or `.setContent()`.)\n    * ?options  - Any additional key-value attributes to be added to the el,\n                    like an `href` for a link or `src` for an image.\n\nGeneric example:\n\n    new <tagclass>\n        content: 'Some text content'\n        title: 'A title attribute'\n",b._takes_content=null,b._default_child=u,b.prototype.initialize=function(a){var c,d;if(null==a&&(a={}),this._options=_.extend({type:""},a),b.__super__.initialize.call(this,this._options),null==this.constructor._takes_content)throw new Error("Doodad.Tag classes require a @_takes_content class property");this._contents=[],this.constructor._takes_content&&null!=a.content&&(_.isArray(a.content)?this.addContent.apply(this,a.content):this.addContent(a.content));for(c in a)d=a[c],"model"!==c&&"content"!==c&&"extra_classes"!==c&&this.$el.attr(c,d);return this._setClasses()},b.prototype.addContent=function(){var a,b=this;return a=1<=arguments.length?O.call(arguments,0):[],_.each(a,function(a){var c;return c=_.isString(a)||_.isNumber(a)?new b.constructor._default_child({content:a.toString()}):a,b._contents.push(c),b.$el.append(c.render())}),this},b.prototype.setContent=function(){var a;return a=1<=arguments.length?O.call(arguments,0):[],this.$el.empty(),this._contents=[],this.addContent.apply(this,a),this
},b.prototype.render=function(){var a=this;return this.$el.empty(),_.each(this._contents,function(b){return a.$el.append(b.render())}),this.el},b}(e),n=function(a){function b(){return x=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!1,b.prototype.tagName="IMG",b.prototype.className="IMG",b}(t),c=function(a){function b(){return G=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="A",b.prototype.className="A",b}(t),s=function(a){function b(){return H=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="STRONG",b.prototype.className="STRONG",b}(t),g=function(a){function b(){return I=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="EM",b.prototype.className="EM",b}(t),r=function(a){function b(){return J=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="SPAN",b.prototype.className="SPAN",b}(t),f=function(a){function b(){return K=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="DIV",b.prototype.className="DIV",b}(t),q=function(a){function b(){return L=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="P",b.prototype.className="P",b}(t),o=function(a){function b(){return M=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="LI",b.prototype.className="LI",b}(t),v=function(a){function b(){return N=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b._default_child=o,b.prototype.tagName="UL",b.prototype.className="UL",b}(t),p=function(a){function b(){return y=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b._default_child=o,b.prototype.tagName="OL",b.prototype.className="OL",b}(t),h=function(a){function b(){return z=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H1",b.prototype.className="H1",b}(t),i=function(a){function b(){return A=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H2",b.prototype.className="H2",b}(t),j=function(a){function b(){return B=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H3",b.prototype.className="H3",b}(t),k=function(a){function b(){return C=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H4",b.prototype.className="H4",b}(t),l=function(a){function b(){return D=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H5",b.prototype.className="H5",b}(t),m=function(a){function b(){return E=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!0,b.prototype.tagName="H6",b.prototype.className="H6",b}(t),d=function(a){function b(){return F=b.__super__.constructor.apply(this,arguments)}return R(b,a),b._takes_content=!1,b.prototype.tagName="BR",b.prototype.className="BR",b}(t),b.exports={A:c,BR:d,DIV:f,EM:g,H1:h,H2:i,H3:j,H4:k,H5:l,H6:m,IMG:n,LI:o,OL:p,P:q,SPAN:r,STRONG:s,Tag:t,TextNode:u,UL:v}}).call(this)},{"../BaseDoodad":1}],12:[function(a,b){function c(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function d(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function e(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),l[e]=1),e}function f(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var a=c("style");return d(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},o=function p(a){return this.spin?(this.opts=h(a||{},p.defaults,n),void 0):new p(a)};o.defaults={},h(o.prototype,{spin:function(a){this.stop();var b,d,e=this,f=e.opts,h=e.el=g(c(0,{className:f.className}),{position:"relative",zIndex:f.zIndex}),k=f.radius+f.length+f.width;if(a&&(a.insertBefore(h,a.firstChild||null),d=i(a),b=i(h),g(h,{left:("auto"==f.left?d.x-b.x+(a.offsetWidth>>1):f.left+k)+"px",top:("auto"==f.top?d.y-b.y+(a.offsetHeight>>1):f.top+k)+"px"})),h.setAttribute("aria-role","progressbar"),e.lines(h,e.opts),!j){var l=0,m=f.fps,n=m/f.speed,o=(1-f.opacity)/(n*f.trail/100),p=n/f.lines;!function q(){l++;for(var a=f.lines;a;a--){var b=Math.max(1-(l+a*p)%n*o,f.opacity);e.opacity(h,f.lines-a,b,f)}e.timeout=e.el&&setTimeout(q,~~(1e3/m))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(a,b){function f(a,d){return g(c(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*i+b.rotate)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}for(var h,i=0;i<b.lines;i++)h=g(c(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:j&&e(b.opacity,b.trail,i,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&d(h,g(f("#000","0 0 4px #000"),{top:"2px"})),d(a,d(h,f(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),!function(){function a(a,b){return c("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=g(c("group"),{behavior:"url(#default#VML)"});!f(b,"transform")&&b.adj?(m.addRule(".spin-vml","behavior:url(#default#VML)"),o.prototype.lines=function(b,c){function e(){return g(a("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function f(b,f,h){d(l,d(g(e(),{rotation:360/c.lines*b+"deg",left:~~f}),d(g(a("roundrect",{arcsize:1}),{width:i,height:c.width,left:c.radius,top:-c.width>>1,filter:h}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var h,i=c.length+c.width,j=2*i,k=2*-(c.width+c.length)+"px",l=g(e(),{position:"absolute",top:k,left:k});if(c.shadow)for(h=1;h<=c.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=c.lines;h++)f(h);return d(b,l)},o.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):j=f(b,"animation")}(),b.exports=o},{}]},{},[8]);